# 2025-12-29 17:00

# TUNæ¨¡å¼
vif_only: true
# IPv6
ipv6: true
# HTTPä»£ç†ç«¯å£
http_port: 6154
# Socks5ä»£ç†ç«¯å£
socks_port: 6153
# å…è®¸å¤–éƒ¨è¿æ¥
allow_external_connections: true
# åŠ«æŒ DNS æœåŠ¡å™¨
hijack_dns:
- '*:53'
# è‡ªå®šä¹‰MaxMindæ•°æ®åº“
geoip_db_url: https://loon.103516.xyz/GeoData/Country-Masaiki.mmdb
asn_db_url: https://loon.103516.xyz/GeoData/GeoLite2-ASN-P3TERX.mmdb
# ä»£ç†å»¶è¿Ÿæµ‹è¯•
proxy_latency_test_url: http://latency-test.skk.moe/endpoint
# ç›´è¿å»¶è¿Ÿæµ‹è¯•
direct_latency_test_url: http://connectivitycheck.platform.hicloud.com/generate_204
dns:
  # DNS å¼•å¯¼å™¨ï¼šç”¨äºè§£æä¸Šæ¸¸DNS(DoTã€DoHã€DoQ)ï¼Œé»˜è®¤ system
  bootstrap:
    - system
  upstreams:
    # å›½å†…å…¬å…± DNS
    Domestic-DNS:
    - 223.5.5.5
    - 119.29.29.29
    - 114.114.114.114
  # DNS è½¬å‘è§„åˆ™
  forward:
  - wildcard: # é€šé…ç¬¦è§„åˆ™
      match: "*"
      value: Domestic-DNS
policy_groups:
- external:
    name: SubName1 
    type: select
    urls: 
    - http://your-service-provider1
    filter: '^(?=.*(.))(?!.*((?i)ç¾¤|é‚€è¯·|è¿”åˆ©|å¾ªç¯|å®˜ç½‘|å®¢æœ|ç½‘ç«™|ç½‘å€|è·å–|è®¢é˜…|æµé‡|æ€»è®¡|åˆ°æœŸ|æœºåœº|ä¸‹æ¬¡|é‡ç½®|é‡æ–°|è®¾ç½®|ç‰ˆæœ¬|å®˜å€|å¤‡ç”¨|è¿‡æœŸ|å·²ç”¨|è”ç³»|é‚®ç®±|å·¥å•|è´©å–|é€šçŸ¥|å€’å–|é˜²æ­¢|å›½å†…|åœ°å€|é¢‘é“|æ— æ³•|è¯´æ˜|ä½¿ç”¨|æç¤º|ç‰¹åˆ«|è®¿é—®|æ”¯æŒ|æ•™ç¨‹|å…³æ³¨|æ›´æ–°|ä½œè€…|åŠ å…¥|è¶…æ—¶|æ”¶è—|(\b(USE|USED|TOTAL|EXPIRE|EMAIL|Panel|Channel|Author|Traffic)(\d+)?\b|(\d{4}-\d{2}-\d{2}|\dG)))).*$'
    icon: https://raw.githubusercontent.com/sooyaaabo/IconLibrary/main/App/Egern-02.png
    hidden: false
- external:
    name: SubName2
    type: select
    urls: 
    - http://your-service-provider2
    filter: '^(?=.*(.))(?!.*((?i)ç¾¤|é‚€è¯·|è¿”åˆ©|å¾ªç¯|å®˜ç½‘|å®¢æœ|ç½‘ç«™|ç½‘å€|è·å–|è®¢é˜…|æµé‡|æ€»è®¡|åˆ°æœŸ|æœºåœº|ä¸‹æ¬¡|é‡ç½®|é‡æ–°|è®¾ç½®|ç‰ˆæœ¬|å®˜å€|å¤‡ç”¨|è¿‡æœŸ|å·²ç”¨|è”ç³»|é‚®ç®±|å·¥å•|è´©å–|é€šçŸ¥|å€’å–|é˜²æ­¢|å›½å†…|åœ°å€|é¢‘é“|æ— æ³•|è¯´æ˜|ä½¿ç”¨|æç¤º|ç‰¹åˆ«|è®¿é—®|æ”¯æŒ|æ•™ç¨‹|å…³æ³¨|æ›´æ–°|ä½œè€…|åŠ å…¥|è¶…æ—¶|æ”¶è—|(\b(USE|USED|TOTAL|EXPIRE|EMAIL|Panel|Channel|Author|Traffic)(\d+)?\b|(\d{4}-\d{2}-\d{2}|\dG)))).*$'
    icon: https://raw.githubusercontent.com/sooyaaabo/IconLibrary/main/App/Egern-02.png
    hidden: false
- auto_test:
    name: Hong Kong
    policies:
    - SubName1
    - SubName2
    flatten: true
    filter: ^(?=.*((?i)ğŸ‡­ğŸ‡°|é¦™æ¸¯|(\b(HK|HKG|Hong|Hong Kong)(\d+)?\b)))(?!.*((?i)å›å›½|æ ¡å›­|æ¸¸æˆ|ğŸ®|(\b(GAME)(\d+)?\b))).*$
    icon: https://raw.githubusercontent.com/sooyaaabo/IconLibrary/main/Flag/HongKong.png
- auto_test:
    name: Macao
    policies:
    - SubName1
    - SubName2
    flatten: true
    filter: ^(?=.*((?i)ğŸ‡²ğŸ‡´|æ¾³é—¨|(\b(MO|MAC|Oman|Macau|Macao)(\d+)?\b)))(?!.*((?i)å›å›½|æ ¡å›­|æ¸¸æˆ|ğŸ®|(\b(GAME)(\d+)?\b))).*$
    icon: https://raw.githubusercontent.com/sooyaaabo/IconLibrary/main/Flag/Macao.png
- auto_test:
    name: TaiWan
    policies:
    - SubName1
    - SubName2
    flatten: true
    filter: ^(?=.*((?i)ğŸ‡¹ğŸ‡¼|ğŸ‡¨ğŸ‡³|å°æ¹¾|å°åŒ—|(\b(TW|TWN|Tai|Taiwan)(\d+)?\b)))(?!.*((?i)å›å›½|æ ¡å›­|æ¸¸æˆ|ğŸ®|(\b(GAME)(\d+)?\b))).*$
    icon: https://raw.githubusercontent.com/sooyaaabo/IconLibrary/main/Flag/Taiwan.png
- auto_test:
    name: Japan
    policies:
    - SubName1
    - SubName2
    flatten: true
    filter: ^(?=.*((?i)ğŸ‡¯ğŸ‡µ|æ—¥æœ¬|å·æ—¥|ä¸œäº¬|å¤§é˜ª|æ³‰æ—¥|åŸ¼ç‰|(\b(JP|JPN|Japan)(\d+)?\b)))(?!.*((?i)å›å›½|æ ¡å›­|æ¸¸æˆ|ğŸ®|(\b(GAME)(\d+)?\b))).*$
    icon: https://raw.githubusercontent.com/sooyaaabo/IconLibrary/main/Flag/Japan.png
- auto_test:
    name: South Korea
    policies:
    - SubName1
    - SubName2
    flatten: true
    filter: ^(?=.*((?i)ğŸ‡°ğŸ‡·|éŸ©å›½|éŸ“|é¦–å°”|(\b(KR|KOR|Korea|Seoul)(\d+)?\b)))(?!.*((?i)å›å›½|æ ¡å›­|æ¸¸æˆ|ğŸ®|(\b(GAME)(\d+)?\b))).*$
    icon: https://raw.githubusercontent.com/sooyaaabo/IconLibrary/main/Flag/SouthKorea.png
- auto_test:
    name: Singapore
    policies:
    - SubName1
    - SubName2
    flatten: true
    filter: ^(?=.*((?i)ğŸ‡¸ğŸ‡¬|æ–°åŠ å¡|æ–°å›½|ç‹®|(\b(SG|SGP|Singapore)(\d+)?\b)))(?!.*((?i)å›å›½|æ ¡å›­|æ¸¸æˆ|ğŸ®|(\b(GAME)(\d+)?\b))).*$
    icon: https://raw.githubusercontent.com/sooyaaabo/IconLibrary/main/Flag/Singapore.png
- auto_test:
    name: United States
    policies:
    - SubName1
    - SubName2
    flatten: true
    filter: ^(?=.*((?i)ğŸ‡ºğŸ‡¸|ç¾å›½|æ³¢ç‰¹å…°|è¾¾æ‹‰æ–¯|ä¿„å‹’å†ˆ|å‡¤å‡°åŸ|è´¹åˆ©è’™|ç¡…è°·|æ‹‰æ–¯ç»´åŠ æ–¯|æ´›æ‰çŸ¶|åœ£ä½•å¡|åœ£å…‹æ‹‰æ‹‰|è¥¿é›…å›¾|èŠåŠ å“¥|(\b(US|USA|United States|America)(\d+)?\b)))(?!.*((?i)å›å›½|æ ¡å›­|æ¸¸æˆ|ğŸ®|(\b(GAME)(\d+)?\b))).*$
    icon: https://raw.githubusercontent.com/sooyaaabo/IconLibrary/main/Flag/UnitedStates.png
- select:
    name: Remaining
    policies:
    - SubName1
    - SubName2
    flatten: true
    filter: ^(?=.*(.*))(?!.*((?i)ğŸ‡­ğŸ‡°|ğŸ‡²ğŸ‡´|ğŸ‡¹ğŸ‡¼|ğŸ‡¯ğŸ‡µ|ğŸ‡°ğŸ‡·|ğŸ‡¸ğŸ‡¬|ğŸ‡ºğŸ‡¸|ğŸ‡¬ğŸ‡§|é¦™æ¸¯|æ¾³é—¨|å°æ¹¾|æ—¥æœ¬|å·æ—¥|ä¸œäº¬|å¤§é˜ª|æ³‰æ—¥|åŸ¼ç‰|éŸ©å›½|éŸ“|é¦–å°”|æ–°åŠ å¡|ç‹®|ç¾å›½|æ³¢ç‰¹å…°|è¾¾æ‹‰æ–¯|ä¿„å‹’å†ˆ|å‡¤å‡°åŸ|è´¹åˆ©è’™|ç¡…è°·|æ‹‰æ–¯ç»´åŠ æ–¯|æ´›æ‰çŸ¶|åœ£ä½•å¡|åœ£å…‹æ‹‰æ‹‰|è¥¿é›…å›¾|èŠåŠ å“¥|è‹±å›½|ä¼¦æ•¦|ç¾¤|é‚€è¯·|è¿”åˆ©|å¾ªç¯|å®˜ç½‘|å®¢æœ|ç½‘ç«™|ç½‘å€|è·å–|è®¢é˜…|æµé‡|æ€»è®¡|åˆ°æœŸ|æœºåœº|ä¸‹æ¬¡|é‡ç½®|é‡æ–°|è®¾ç½®|ç‰ˆæœ¬|å®˜å€|å¤‡ç”¨|è¿‡æœŸ|å·²ç”¨|è”ç³»|é‚®ç®±|å·¥å•|è´©å–|é€šçŸ¥|å€’å–|é˜²æ­¢|å›½å†…|åœ°å€|é¢‘é“|æ— æ³•|è¯´æ˜|ä½¿ç”¨|æç¤º|ç‰¹åˆ«|è®¿é—®|æ”¯æŒ|æ•™ç¨‹|å…³æ³¨|æ›´æ–°|ä½œè€…|åŠ å…¥|è¶…æ—¶|æ”¶è—|å›å›½|æ ¡å›­|æ¸¸æˆ|ğŸ®|(\b(HK|HKG|Hong|Hong Kong|MO|MAC|Oman|Macau|Macao|TW|TWN|Tai|Taiwan|JP|JPN|Japan|KR|KOR|Korea|SG|SGP|Singapore|US|USA|United States|America|UK|GB|GBR|United Kingdom|Britain|USE|USED|TOTAL|EXPIRE|EMAIL|GAME|Panel|Channel|Author|Traffic)(\d+)?\b|(\d{4}-\d{2}-\d{2}|\dG)))).*$
    icon: https://raw.githubusercontent.com/sooyaaabo/IconLibrary/main/Flag/UnitedNations.png
- select:
    name: Final
    policies:
    - DIRECT
    - Hong Kong
    - Macao
    - TaiWan
    - Japan
    - South Korea
    - Singapore
    - United States
    icon: https://raw.githubusercontent.com/sooyaaabo/IconLibrary/main/Other/Final.png
- select:
    name: OpenAI
    policies:
    - Hong Kong
    - Macao
    - TaiWan
    - Japan
    - South Korea
    - Singapore
    - United States
    icon: https://raw.githubusercontent.com/sooyaaabo/IconLibrary/main/App/ChatGPT.png
- select:
    name: AppleProxy
    policies:
    - Hong Kong
    - Macao
    - TaiWan
    - Japan
    - South Korea
    - Singapore
    - United States
    icon: https://raw.githubusercontent.com/sooyaaabo/IconLibrary/main/App/Apple.png
- select:
    name: Google
    policies:
    - Hong Kong
    - Macao
    - TaiWan
    - Japan
    - South Korea
    - Singapore
    - United States
    icon: https://raw.githubusercontent.com/sooyaaabo/IconLibrary/main/App/Google.png
- select:
    name: Microsoft
    policies:
    - Hong Kong
    - Macao
    - TaiWan
    - Japan
    - South Korea
    - Singapore
    - United States
    icon: https://raw.githubusercontent.com/sooyaaabo/IconLibrary/main/App/Microsoft.png
- select:
    name: GitHub
    policies:
    - Hong Kong
    - Macao
    - TaiWan
    - Japan
    - South Korea
    - Singapore
    - United States
    icon: https://raw.githubusercontent.com/sooyaaabo/IconLibrary/main/App/GitHub-01.png
- select:
    name: X
    policies:
    - Hong Kong
    - Macao
    - TaiWan
    - Japan
    - South Korea
    - Singapore
    - United States
    icon: https://raw.githubusercontent.com/sooyaaabo/IconLibrary/main/App/Twitter-02.png
- select:
    name: Telegram
    policies:
    - Hong Kong
    - Macao
    - TaiWan
    - Japan
    - South Korea
    - Singapore
    - United States
    icon: https://raw.githubusercontent.com/sooyaaabo/IconLibrary/main/App/Telegram-02.png
- select:
    name: TouTube
    policies:
    - Hong Kong
    - Macao
    - TaiWan
    - Japan
    - South Korea
    - Singapore
    - United States
    icon: https://raw.githubusercontent.com/sooyaaabo/IconLibrary/main/App/YouTube.png
- select:
    name: Netflix
    policies:
    - Hong Kong
    - Macao
    - TaiWan
    - Japan
    - South Korea
    - Singapore
    - United States
    icon: https://raw.githubusercontent.com/sooyaaabo/IconLibrary/main/App/Netflix-02.png
- select:
    name: TikTok
    policies:
    - Hong Kong
    - Macao
    - TaiWan
    - Japan
    - South Korea
    - Singapore
    - United States
    icon: https://raw.githubusercontent.com/sooyaaabo/IconLibrary/main/App/TikTok-02.png    
- select:
    name: Emby
    policies:
    - Hong Kong
    - Macao
    - TaiWan
    - Japan
    - South Korea
    - Singapore
    - United States
    icon: https://raw.githubusercontent.com/sooyaaabo/IconLibrary/main/App/Conflux.png
rules:
- rule_set:
    match: https://raw.githubusercontent.com/Repcz/Tool/X/Egern/Rules/Direct.yaml
    policy: DIRECT
- rule_set:
    match: https://raw.githubusercontent.com/Repcz/Tool/X/Egern/Rules/Reject.yaml
    policy: REJECT
- rule_set:
    match: https://raw.githubusercontent.com/Repcz/Tool/X/Egern/Rules/AI.yaml
    policy: OpenAI
- rule_set:
    match: https://raw.githubusercontent.com/Repcz/Tool/X/Egern/Rules/Github.yaml
    policy: GitHub
- rule_set:
    match: https://raw.githubusercontent.com/Repcz/Tool/X/Egern/Rules/Microsoft.yaml
    policy: Microsoft
- rule_set:
    match: https://raw.githubusercontent.com/Repcz/Tool/X/Egern/Rules/Google.yaml
    policy: Google
- rule_set:
    match: https://raw.githubusercontent.com/Repcz/Tool/X/Egern/Rules/Telegram.yaml
    policy: Telegram
- rule_set:
    match: https://raw.githubusercontent.com/Repcz/Tool/X/Egern/Rules/Twitter.yaml
    policy: X
- rule_set:
    match: https://raw.githubusercontent.com/Repcz/Tool/X/Egern/Rules/Emby.yaml
    policy: Emby
- rule_set:
    match: https://raw.githubusercontent.com/Repcz/Tool/X/Egern/Rules/YouTube.yaml
    policy: YouTube
- rule_set:
    match: https://raw.githubusercontent.com/Repcz/Tool/X/Egern/Rules/Netflix.yaml
    policy: Netflix
- rule_set:
    match: https://raw.githubusercontent.com/Repcz/Tool/X/Egern/Rules/TikTok.yaml
    policy: TikTok
- rule_set:
    match: https://raw.githubusercontent.com/Repcz/Tool/X/Egern/Rules/AppleProxy.yaml
    policy: AppleProxy
- rule_set:
    match: https://raw.githubusercontent.com/Repcz/Tool/X/Egern/Rules/ProxyGFW.yaml
    policy: Final
- rule_set:
    match: https://raw.githubusercontent.com/Repcz/Tool/X/Egern/Rules/Apple.yaml
    policy: DIRECT
- rule_set:
    match: https://raw.githubusercontent.com/Repcz/Tool/X/Egern/Rules/Lan.yaml
    policy: DIRECT
- geoip:
    match: CN
    policy: DIRECT
- default:
    policy: Final
mitm:
  enabled: true
modules:
- name: BoxJS
  url: https://raw.githubusercontent.com/chavyleung/scripts/master/box/rewrite/boxjs.rewrite.surge.sgmodule
  enabled: true
- name: Script Hub
  url: https://raw.githubusercontent.com/Script-Hub-Org/Script-Hub/main/modules/script-hub.surge.sgmodule
  enabled: true
- name: Sub Store
  url: https://raw.githubusercontent.com/Peng-YM/Sub-Store/master/config/Surge.sgmodule
  enabled: true
