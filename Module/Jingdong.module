#!name=äº¬ä¸œ
#!desc=1.è¿‡æ»¤äº¬ä¸œå¹¿å‘Šï¼›2.å†å²æ¯”ä»·ä¿¡æ¯ï¼Œä»»é€‰å…¶ä¸€å³å¯ã€‚ï¼ˆé¦–æ¬¡ä½¿ç”¨è¯·å…ˆæ‰“å¼€ã€æ…¢æ…¢ä¹°App-æˆ‘çš„ã€‘ï¼Œæç¤ºã€è·å–ckæˆåŠŸğŸ‰ã€‘å³å¯æ­£å¸¸æ¯”ä»·ã€‚ï¼‰\næ­¤æ’ä»¶ä»…æ”¯æŒäº¬ä¸œæ ‡å‡†æ¨¡å¼ã€‚
#!author=RuCu6[https://github.com/RuCu6], Maasea[https://github.com/Maasea], MuTu[https://github.com/githubdulong], è‹äº•ç°ç°[https://github.com/wf021325], mw418[https://github.com/mw418], å¯è‰ğŸ…¥[https://github.com/luestr/ProxyResource/blob/main/README.md]
#!icon=https://raw.githubusercontent.com/sooyaaabo/IconLibrary/main/App/Jingdong.png
#!openUrl=https://apps.apple.com/app/id414245413
#!homepage=https://github.com/sooyaaabo/Egern
#!date=2025-12-29 16:30
#!arguments=Manmanbuy-Cookie:true,JDPrice-TitleEmbed:false,JDPrice-DetailNotify:false,JDPrice-DetailEmbed-Table:true,JDPrice-DetailEmbed-Line:false

[Rule]
# AND, ((PROTOCOL, TCP), (DOMAIN, api.m.jd.com)), REJECT-NO-DROP
URL-REGEX,"^http:\/\/\w{32}\.jddebug\.com\/diagnose\?",REJECT

[URL Rewrite]
^http:\/\/\w{32}\.jddebug\.com\/diagnose\? - reject
^https?:\/\/api\.m\.jd\.com\/client\.action\?functionId=getWidgetV1052 - reject

[Body Rewrite]
http-response ^https:\/\/api\.m\.jd\.com\/client\.action\?functionId=lite_advertising jdLiteAdvertisingVO sooyaaabo
http-response-jq ^https:\/\/api\.m\.jd\.com\/client\.action\?functionId=basicConfig 'if (getpath(["data","JDMessage","socketmonitor"]) | has("isSocketEstablishedAhead")) then (setpath(["data","JDMessage","socketmonitor","isSocketEstablishedAhead"]; 0)) else . end'
http-response-jq ^https:\/\/api\.m\.jd\.com\/client\.action\?functionId=basicConfig 'if (getpath(["data","JDMessage","socketmonitor"]) | has("isSocketReport")) then (setpath(["data","JDMessage","socketmonitor","isSocketReport"]; 0)) else . end'
http-response-jq ^https:\/\/api\.m\.jd\.com\/client\.action\?functionId=basicConfig 'if (getpath(["data","JDHttpToolKit","httpdns"]) | has("httpdns")) then (setpath(["data","JDHttpToolKit","httpdns","httpdns"]; 0)) else . end'

[Map Local]
^https?:\/\/m\.360buyimg\.com\/mobilecms\/s1125x2436_jfs data-type=text data=" " status-code=200

^https:\/\/api\.m\.jd\.com\/\?loginType=11 data-type=text data="{}" status-code=200 header="Content-Type:application/json"

^https:\/\/api\.m\.jd\.com\/client\.action\?functionId=(?:searchBoxWord|stationPullService|uniformRecommend[06]) data-type=text data="{}" status-code=200 header="Content-Type:application/json"

[Script]
# äº¬ä¸œ
[äº¬ä¸œ]ç§»é™¤å¹¿å‘Š = type=http-response, pattern=^https:\/\/api\.m\.jd\.com\/client\.action\?functionId=(?:deliverLayer|getTabHomeInfo|myOrderInfo|orderTrackBusiness|personinfoBusiness|start|welcomeHome), script-path=https://kelee.one/Resource/JavaScript/JD/JD_remove_ads.js, requires-body=true

# äº¬ä¸œæé€Ÿç‰ˆ
[äº¬ä¸œ]ç§»é™¤äº¬ä¸œæé€Ÿç‰ˆå¹¿å‘Š = type=http-response, pattern=^https:\/\/api\.m\.jd\.com\/client\.action\?functionId=lite_advertising, script-path=https://loon.103516.xyz/Script/CommonScript/replace-body.js, requires-body=true, argument=jdLiteAdvertisingVO -> sooyaaabo

# äº¬ä¸œæ¯”ä»·
[äº¬ä¸œæ¯”ä»·]è·å–æ…¢æ…¢ä¹°Cookie = type=http-request, pattern=^https?:\/\/apapia-sqk-weblogic\.manmanbuy\.com\/baoliao\/center\/menu$, script-path=https://raw.githubusercontent.com/mw418/Loon/main/script/jd_price.js, requires-body=true, timeout=60

[äº¬ä¸œæ¯”ä»·]æ ‡é¢˜åµŒå…¥ç‰ˆ = type=http-response, pattern=^https?:\/\/api\.m\.jd\.com\/client\.action\?functionId=(wareBusiness|serverConfig|basicConfig), script-path=https://raw.githubusercontent.com/wf021325/qx/master/js/jd_price.js, requires-body=true

[äº¬ä¸œæ¯”ä»·]è¯¦æƒ…é€šçŸ¥ç‰ˆ = type=http-request, pattern=^https?:\/\/in\.m\.jd\.com\/product\/graphext\/\d+\.html, script-path=https://raw.githubusercontent.com/mw418/Loon/main/script/jd_price.js, timeout=60

[äº¬ä¸œæ¯”ä»·]è¯¦æƒ…åµŒå…¥ç‰ˆï¼ˆè¡¨æ ¼å›¾ï¼‰ = type=http-response, pattern=^https?:\/\/in\.m\.jd\.com\/product\/graphext\/\d+\.html, script-path=https://raw.githubusercontent.com/wf021325/qx/master/js/jd_price.js, requires-body=true, timeout=60

[äº¬ä¸œæ¯”ä»·]è¯¦æƒ…åµŒå…¥ç‰ˆï¼ˆæŠ˜çº¿å›¾ï¼‰ = type=http-response, pattern=^https?:\/\/in\.m\.jd\.com\/product\/graphext\/\d+\.html, script-path=https://loon.103516.xyz/Script/Jingdong/JD_Price.js, requires-body=true, timeout=60

[MITM]
hostname = %APPEND% api.m.jd.com, in.m.jd.com, apapia-sqk-weblogic.manmanbuy.com, m.360buyimg.com
